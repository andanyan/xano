syntax = "proto3";
package deal;

option go_package = "../deal";

// double float int32 int64 uint32 uint64 sint32 sint64 
// fixed32 fixed64 sfixed64 sfixed32 sfixed64 bool string bytes
// repeated optional required
// protoc 3.19.2
// protoc --proto_path=. --go_out=. *.proto
// protoc-go-inject-tag --input=*.pb.go 

// 包消息
message Msg {
    // 路由 模块_方法
    // @inject_tag: json:"route"
    string route = 1;
    // 消息id
    // @inject_tag: json:"mid"
    uint64 mid = 2;
    // data数据协议
    // @inject_tag: json:"deal"
    uint32 deal = 3;
    // 数据
    // @inject_tag: json:"data"
    bytes data = 4;
}

// 路由注册
message GateRouteRequest {
    // 行为 0-正常 1-关闭
    uint32 status = 1;
    // 端口
    string port = 2;
    // 路由列表
    repeated string routes = 3;
}

// 路由注册回包
message GateRouteItem {
    int64 lastTime = 1;
    string addr = 2;
    repeated string routes = 3;
}
message GateRouteResponse {
    // 路由列表
    repeated GateRouteItem routes = 1;
}